'use strict';
// Source: app-minify/app.js
var app=angular.module("alertAsApp",["ngRoute","openlayers-directive","pascalprecht.translate","angularModalService","FBFullScreen","720kb.socialshare"]).constant("LOADER",{LOADED_CLASS:"pace-done",LOADING_CLASS:"pace-progress"}).constant("CONSTANTES",{VIEW_FOLDER:"app-minify",URL_SERVIDOR:"http://alertas/web"}).config(["$logProvider","CONSTANTES","$translateProvider","$routeProvider",function(a,b,c,d){c.translations("pt-BR",{"TAB.HOJE":"Hoje","TAB.AMANHA":"Amanhã","TAB.FUTURO":"Próximos Dias",MSG_SEM_EVENTO:"Sem Evento","HEADERMENU.ABOUT":"Sobre o Alert-AS","HEADERMENU.TERMS":"Termos e Condições","HEADERMENU.CONTACT":"Contato","HEADERMENU.HELP":"Ajuda","HEADERMENU.FULLSCREEN":"Tela Cheia","HEADERMENU.FORECAST":"Previsão do Tempo","RISK.LEGENDA":"LEGENDA","RISK.LABEL_LEGENDA":"Nível de Severidade","RISK.NOTHING":"Nada Reportado","RISK.POTENTIAL":"Perigo Potencial","RISK.DANGER":"Perigo","RISK.DANGEROUS":"Muito Perigoso",ALERTMODAL_DATAINICIO:"Início",ALERTMODAL_DATAFIM:"Fim",ALERTMODAL_RISCOEMPOTENCIAL:"Risco em Potencial",ALERTMODAL_RECOMENDACOES:"Recomendações",ALERTMODAL_AREASAFETADAS:"Áreas Afetadas",ALERTMODAL_NENHUM_RESULTADO:"Nenhum resultado"}),c.translations("en",{"TAB.HOJE":"Today","TAB.AMANHA":"Tomorrow","TAB.FUTURO":"Next Days",MSG_SEM_EVENTO:"Nothing Reported","HEADERMENU.ABOUT":"About Alert-As","HEADERMENU.TERMS":"Terms and Conditions","HEADERMENU.CONTACT":"Contact","HEADERMENU.HELP":"Help","HEADERMENU.FULLSCREEN":"Full Screen","HEADERMENU.FORECAST":"Weather Forecast","RISK.LEGENDA":"CAPTION","RISK.LABEL_LEGENDA":"Severity Levels","RISK.NOTHING":"Nothing Reported","RISK.POTENTIAL":"Potential","RISK.DANGER":"Danger","RISK.DANGEROUS":"Very Dangerous",ALERTMODAL_DATAINICIO:"Start",ALERTMODAL_DATAFIM:"End",ALERTMODAL_RISCOEMPOTENCIAL:"Event Description",ALERTMODAL_RECOMENDACOES:"Warning",ALERTMODAL_AREASAFETADAS:"Affected Areas",ALERTMODAL_NENHUM_RESULTADO:"Nothing Founded"}),c.translations("es",{"TAB.HOJE":"Hoy","TAB.AMANHA":"Mañana","TAB.FUTURO":"Próximos días",MSG_SEM_EVENTO:"Sin Evento","HEADERMENU.ABOUT":"Acerca del Alert-AS","HEADERMENU.TERMS":"Términos y Condiciones","HEADERMENU.CONTACT":"Contacto","HEADERMENU.HELP":"Ayuda","HEADERMENU.FULLSCREEN":"Pantalla Completa","HEADERMENU.FORECAST":"Previsión del Tiempo","RISK.LEGENDA":"LEYENDA","RISK.LABEL_LEGENDA":"Gravedad","RISK.NOTHING":"Nada previsto","RISK.POTENTIAL":"Peligro Potencial","RISK.DANGER":"Peligro","RISK.DANGEROUS":"Gran Peligro",ALERTMODAL_DATAINICIO:"Principio",ALERTMODAL_DATAFIM:"Fin",ALERTMODAL_RISCOEMPOTENCIAL:"Descripción del evento",ALERTMODAL_RECOMENDACOES:"Recomendaciones",ALERTMODAL_AREASAFETADAS:"Las Áreas Afectadas",ALERTMODAL_NENHUM_RESULTADO:"No encontrado"}),c.preferredLanguage("es"),d.when("/history/:id",{controller:"mainController",template:" "})}]).run(["$location","$log","$rootScope","CONSTANTES",function(a,b,c,d){}]);
// Source: app-minify/controllers/main.js
app.controller("mainController",["$rootScope","$scope","$log","$translate","$location","$q","$filter","$interval","$routeParams","ModalService","popUpService","paisService","codarService","emergenciaService","CONSTANTES","LOADER","Fullscreen",function(a,b,c,d,e,f,g,h,j,k,l,m,n,o,p,q,r){a.loader=q.LOADING_CLASS,b.host=e.host(),b.protocol=e.protocol(),b.headerMenuVisibility=!0,b.alertasMenuVisibility=!0,b.helpOpened=!1,b.codares=[],b.eventosHoje=[],b.emergenciasHoje=[],b.eventosAmanha=[],b.emergenciasAmanha=[],b.eventosFuturos=[],b.emergenciasFuturas=[],b.tabSelected="hoje",b.emergenciasSelecionadas=[],b.mapCenterConfig={center:{lat:-38.64,lon:-63.8,zoom:5}},b.mapCenterConfigOriginal={},b.mapWmsConfig={wms:{source:{type:"ImageWMS",url:"http://alert-as.inmet.gov.br:8080/geoserver/cvws/wms/",params:{LAYERS:"cvws:10",transparent:!0}}}},b.initialize=function(){a.loader=q.LOADING_CLASS,f.all([n.getCodares(),m.getMapCenterConfig(),m.getMapWmsConfig(),o.getEmergenciasHoje(),o.getEmergenciasAmanha(),o.getEmergenciasFuturas()]).then(function(c){b.setCodares(c[0].data),b.setMapCenterConfig(c[1].data),b.setMapWmsConfig(c[2].data),b.eventosHoje=c[3].data,b.emergenciasHoje=b.agruparEmergenciasPorLocal(angular.copy(b.eventosHoje)),b.eventosAmanha=c[4].data,b.emergenciasAmanha=b.agruparEmergenciasPorLocal(angular.copy(b.eventosAmanha)),b.eventosFuturos=c[5].data,b.emergenciasFuturas=b.agruparEmergenciasPorLocal(angular.copy(b.eventosFuturos)),b.setEmergenciasSelecionadas(),j.id&&o.getEmergencia(j.id).then(function(b){a.loader=q.LOADING_CLASS;var c=b.data;l.showSingletonModal({templateUrl:p.VIEW_FOLDER+"/views/modalAlert.html",controller:"ModalAlertController",inputs:{emergencia:c}},function(a){a.close.then(function(a){})},function(b){a.loader=q.LOADED_CLASS}),a.loader=q.LOADED_CLASS}),a.loader=q.LOADED_CLASS})},b.setFullScreen=function(){r.isEnabled()?r.cancel():r.all()},b.setTabSelected=function(a){b.tabSelected=a,b.setEmergenciasSelecionadas()},b.setMapCenterConfig=function(a){b.mapCenterConfig=a,b.mapCenterConfigOriginal=a},b.setCodares=function(a){b.codares=a},b.setMapWmsConfig=function(a){b.mapWmsConfig=a},b.resetMap=function(){b.mapCenterConfig=b.mapCenterConfigOriginal},b.isLanguageSetted=function(a){return d.use()==a},b.changeLanguage=function(a){d.use(a)},b.openModalAlert=function(a){l.showSingletonModal({templateUrl:p.VIEW_FOLDER+"/views/modalAlert.html",controller:"ModalAlertController",inputs:{emergencia:a}},function(a){a.close.then(function(a){})})},b.openModalAbout=function(){l.showSingletonModal({templateUrl:p.VIEW_FOLDER+"/views/modal-about/modalAbout_"+d.use()+".html",controller:"ModalComumController",inputs:{transfer:{}}},function(a){a.close.then(function(a){})})},b.openModalTerms=function(){l.showSingletonModal({templateUrl:p.VIEW_FOLDER+"/views/modal-terms/modalTerms_"+d.use()+".html",controller:"ModalComumController",inputs:{transfer:{}}},function(a){a.close.then(function(a){})})},b.openModalContact=function(){l.showSingletonModal({templateUrl:p.VIEW_FOLDER+"/views/modal-contact/modalContact_"+d.use()+".html",controller:"ModalComumController",inputs:{transfer:{}}},function(a){a.close.then(function(a){})})},b.openModalLegenda=function(){l.showSingletonModal({templateUrl:p.VIEW_FOLDER+"/views/modalLegenda.html",controller:"ModalComumController",inputs:{transfer:{codarService:n,codares:b.codares}}},function(a){a.close.then(function(a){})})},b.openHelp=function(){b.helpClass="help-"+d.use()},b.closeHelp=function(){b.helpClass=""},b.setEmergenciasSelecionadas=function(a){if(a)b.emergenciasSelecionadas=a;else switch(b.tabSelected){case"hoje":b.emergenciasSelecionadas=angular.copy(b.eventosHoje);break;case"amanha":b.emergenciasSelecionadas=angular.copy(b.eventosAmanha);break;case"futuro":b.emergenciasSelecionadas=angular.copy(b.eventosFuturos)}},b.agruparEmergenciasPorLocal=function(a){var b=function(a,b){for(var c=0;c<a.length;c++)if(a[c].uf==b)return c},c=[];for(i=0;i<a.length;i++)angular.forEach(a[i].ufsAtingidas,function(d,e){var f=b(c,d.uf);if(void 0!==f)c[f].emergencias.push(a[i]);else{var g={uf:d.uf,emergencias:[a[i]]};c.push(g)}});return g("orderBy")(c,"uf")},b.setTooltipOptions=function(a,b){return{title:a,position:b}},b.emergenciaI18nFilter=angular.copy(o.emergenciaI18nFilter),b.isEmpty=function(a){return!!angular.equals({},a)},b.isArrayEmpty=function(a){return 0==a.length},b.fight=function(){},a.$on("setHeaderMenuVisibility",function(a,c){b.headerMenuVisibility=c.headerMenuVisibility}),a.$on("setAlertasMenuVisibility",function(a,c){b.alertasMenuVisibility=c.alertasMenuVisibility}),a.$on("setEmergenciaOnMap",function(a,c){var d=c.emergencia;b.mapCenterConfig=d.configCenterMap,b.setEmergenciasSelecionadas([d])}),a.$on("removeEmergenciaOnMap",function(a,c){b.resetMap(),b.setEmergenciasSelecionadas()}),a.$on("loaderEvent",function(a,c){b.loader=c.loader})}]);
// Source: app-minify/controllers/modal-alert.js
app.controller("ModalAlertController",["$rootScope","$scope","$log","$filter","$translate","close","emergenciaService","emergencia",function(a,b,c,d,e,f,g,h){b.emergencia=angular.copy(h),b.municipios=angular.copy(h.municipios);var i=d("orderBy");a.loading=!1,b.$emit("setHeaderMenuVisibility",{headerMenuVisibility:!1}),b.$emit("setAlertasMenuVisibility",{alertasMenuVisibility:!1}),b.emergenciaI18nFilter=angular.copy(g.emergenciaI18nFilter),b.$emit("setEmergenciaOnMap",{emergencia:angular.copy(b.emergencia)}),b.orderarPor=function(a){b.predicate=a,b.reverse=b.predicate===a?!b.reverse:!1,b.municipios=i(b.municipios,a,b.reverse)},b.close=function(){b.$emit("removeEmergenciaOnMap"),b.$emit("setHeaderMenuVisibility",{headerMenuVisibility:!0}),b.$emit("setAlertasMenuVisibility",{alertasMenuVisibility:!0}),f("Success!")}}]);
// Source: app-minify/controllers/modal-comum.js
app.controller("ModalComumController",["$rootScope","$scope","$log","$translate","close","transfer",function(a,b,c,d,e,f){a.loading=!1,b.transfer=f,b.$emit("setHeaderMenuVisibility",{headerMenuVisibility:!1}),b.$emit("setAlertasMenuVisibility",{alertasMenuVisibility:!1}),b.close=function(){b.$emit("setHeaderMenuVisibility",{headerMenuVisibility:!0}),b.$emit("setAlertasMenuVisibility",{alertasMenuVisibility:!0}),e("Success!")}}]);
// Source: app-minify/directives/tootip.js
app.directive("tooltip",["$log",function(a){return{restrict:"A",scope:{tooltip:"="},link:function(a,b,c){var d=a.tooltip||{};$(b).tooltipster({position:d.position,theme:d.theme||"tooltipster-default",touchDevices:!1,trigger:"hover",content:angular.element("<span><strong>"+d.title+"</strong></span>")})}}}]);
// Source: app-minify/services/codar.js
app.service("codarService",["$http","$log","$translate","utilService",function($http,$log,$translate,utilService){this.getCodares=function(){return $http.get(utilService.getUrlServidor()+"/index.php?r=frontend/front/codar")},this.codarI18nFilter=function(input,field){var language=$translate.use();return eval('input["'+language+'"].'+field)}}]);
// Source: app-minify/services/emergencia.js
app.service("emergenciaService",["$http","$log","$translate","utilService",function(a,b,c,d){this.getEmergenciasHoje=function(){return a.get(d.getUrlServidor()+"/index.php?r=frontend/front/hoje")},this.getEmergenciasAmanha=function(){return a.get(d.getUrlServidor()+"/index.php?r=frontend/front/amanha")},this.getEmergenciasFuturas=function(){return a.get(d.getUrlServidor()+"/index.php?r=frontend/front/futuro")},this.getEmergencia=function(b){return a.get(d.getUrlServidor()+"/index.php?r=frontend/front/emergencia&id="+b)},this.emergenciaI18nFilter=function(a,b){var d=c.use();return a[d][b]}}]);
// Source: app-minify/services/pais.js
app.service("paisService",["$http","$log","utilService",function(a,b,c){this.getMapCenterConfig=function(){return a.get(c.getUrlServidor()+"/index.php?r=frontend/front/mapcenterconfig")},this.getMapWmsConfig=function(){return a.get(c.getUrlServidor()+"/index.php?r=frontend/front/wmsconfig")}}]);
// Source: app-minify/services/pop-up.js
app.service("popUpService",["$log","ModalService",function(a,b){var c={};this.isEmpty=function(a){return!!angular.equals({},a)},this.showSingletonModal=function(a,d,e){this.isEmpty(c)&&(b.showModal({templateUrl:a.templateUrl,controller:a.controller,inputs:a.inputs}).then(function(a){a.close.then(function(a){c={}}),d(a)})["catch"](function(a){e(a)}),c={modalId:Math.floor(1e5*Math.random()+1)})}}]);
// Source: app-minify/services/util.js
app.service("utilService",["$rootScope","CONSTANTES","$http","$log","$q","$location",function(a,b,c,d,e,f){this.getUrlServidor=function(){return b.URL_SERVIDOR.replace("{{HOST}}",f.host())},this.retiraAcentos=function(a){var b="Ã¡Ã Ã£Ã¢Ã¤Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã³Ã²ÃµÃ´Ã¶ÃºÃ¹Ã»Ã¼Ã§ÃÃ€ÃƒÃ‚Ã„Ã‰ÃˆÃŠÃ‹ÃÃŒÃŽÃÃ“Ã’Ã•Ã–Ã”ÃšÃ™Ã›ÃœÃ‡",c="aaaaaeeeeiiiiooooouuuucAAAAAEEEEIIIIOOOOOUUUUC",d="";if(!angular.isUndefined(a)&&""!=a)for(var e=0;e<a.length;e++)try{d+=b.search(a.substr(e,1))>=0?c.substr(b.search(a.substr(e,1)),1):a.substr(e,1)}catch(f){}return d}}]);